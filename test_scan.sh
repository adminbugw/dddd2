#!/bin/bash

echo "=========================================="
echo "端口扫描功能测试"
echo "=========================================="
echo ""

echo "测试1: TCP 端口扫描 (本地)"
echo "命令: ./dddd -t 127.0.0.1 -p 80,443,22"
echo "------------------------------------------"
timeout 10 ./dddd -t 127.0.0.1 -p 80,443,22 2>&1 | grep -E "(扫描|发现|成功|失败|进度|PortScan|ICMP|TCP)" || echo "扫描完成"
echo ""
echo ""

echo "测试2: ICMP 探测"
echo "命令: ./dddd -t 8.8.8.8 -p 53"
echo "------------------------------------------"
timeout 10 ./dddd -t 8.8.8.8 -p 53 2>&1 | grep -E "(扫描|发现|成功|失败|进度|PortScan|ICMP|TCP)" || echo "扫描完成"
echo ""
echo ""

echo "测试3: 多IP 扫描"
echo "命令: ./dddd -t 192.168.1.1,192.168.1.2,192.168.1.254 -p 80,443"
echo "------------------------------------------"
timeout 10 ./dddd -t 192.168.1.1,192.168.1.2,192.168.1.254 -p 80,443 2>&1 | grep -E "(扫描|发现|成功|失败|进度|PortScan|ICMP|TCP)" || echo "扫描完成"
echo ""
echo ""

echo "=========================================="
echo "测试完成"
echo "=========================================="
